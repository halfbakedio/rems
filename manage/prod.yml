prepare:
  summary: prepare the application environment
  command: script/prod/prepare.sh

deploy:
  summary: deploy application
  command: script/prod/deploy.sh

deploy/all:
  summary: deploy all components
  command: |
    robo -c {{ .robo.file }} deploy/api
    robo -c {{ .robo.file }} deploy/app
    robo -c {{ .robo.file }} deploy/core

deploy/api:
  summary: deploy the API gateway
  command: |
    cd services/api
    flyctl deploy

deploy/app:
  summary: deploy the web app
  command: |
    cd web/app-next
    flyctl deploy

deploy/core:
  summary: deploy the core backend
  command: |
    cd services/core
    flyctl deploy
